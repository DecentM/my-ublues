modules:
  # https://gist.github.com/codello/118ad0562bfd91e90d5914a9e2dbe606
  - type: rpm-ostree
    install:
      - cockpit
      - cockpit-machines
      - cockpit-ostree
      - cockpit-navigator
      # for cockpit-sensors
      - lm_sensors
      # for cockpit-file-sharing
      - samba-common-tools
      - samba-winbind-clients

  - type: rpm-ostree
    repos:
      - https://copr.fedorainfracloud.org/coprs/spike/znapzend/repo/fedora-40/spike-znapzend-fedora-40.repo
    install:
      # for cockpit-zfs-manager
      - znapzend

  # cockpit-file-sharing
  # cockpit-identities
  - type: rpm-ostree
    install:
      - https://github.com/45Drives/cockpit-file-sharing/releases/download/v4.2.1/cockpit-file-sharing-4.2.1-1.el8.noarch.rpm

  # cockpit-zfs-manager
  - type: script
    scripts: []
    snippets:
      - "git clone https://github.com/45drives/cockpit-zfs-manager.git"
      - "cp -r cockpit-zfs-manager/zfs /usr/share/cockpit"
      - "rm -r cockpit-zfs-manager"

  # cockpit-sensors
  - type: script
    scripts: []
    snippets:
      - "curl -O -L https://github.com/ocristopfer/cockpit-sensors/releases/latest/download/cockpit-sensors.tar.xz"
      - "tar -xf cockpit-sensors.tar.xz cockpit-sensors/dist"
      - "mv cockpit-sensors/dist /usr/share/cockpit/sensors"
      - "rm -r cockpit-sensors"
      - "rm cockpit-sensors.tar.xz"

  - type: systemd
    system:
      enabled:
        - cockpit.socket
