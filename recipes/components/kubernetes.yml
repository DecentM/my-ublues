modules:
  # https://gist.github.com/codello/118ad0562bfd91e90d5914a9e2dbe606
  - type: files
    files:
      - source: disable-selinux
        destination: /
      - source: kubernetes
        destination: /

  - type: rpm-ostree
    remove:
      - zram-generator
      - firewalld
    install:
      - kubernetes1.31
      - kubernetes1.31-kubeadm
      - kubernetes1.31-client
      - cri-o1.32

  - type: systemd
    system:
      enabled:
        - kubelet
        - crio
